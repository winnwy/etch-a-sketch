<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>etch a sketch</title>
</head>
<body>
    <button id = "myButton" onclick="myPrompt()">New grid</button>
    <button id = "oneColor">Color</button>
    <input type="color" id="colorPicker" value="#800080">
    <button id = "colorful">Rainbow Effect</button>
    <button id = "darkening">Darkening Effect</button>
    <div class="container">
        <div class="large-container" id="myContainer"></div>
    </div>

    <script>
        let defaultColor = '#800080'; // Default color set to purple
        generateGrid(16);

        document.getElementById("colorPicker").addEventListener("input", function(event) {
            defaultColor = event.target.value; 
        });

        function myPrompt() {
            var userGridSize = prompt("Please provide the number of squares per side for the new grid (max: 100)", "16");
            // alert (userGridsize);
            if (isNaN(userGridSize) || userGridSize <= 0 || userGridSize > 100) {
                alert("Please enter a number between 1 and 100.");
                return;
            }
            removeOldGrid();
            generateGrid(userGridSize);
        }

        // Function to remove the existing grid
        function removeOldGrid() {
            const gridContainer = document.getElementById('myContainer');
            while (gridContainer.firstChild) {
                gridContainer.removeChild(gridContainer.firstChild);
            }
        }

        function generateGrid(size) {
            const rows = size;
            const columns = size;
            
            const containerSize = 960; // Size of the container in pixels
            const gridContainer = document.getElementById('myContainer');
            const gridItemSize = containerSize / size - 2; // Subtract 2px to account for gaps

            // Create the grid
            for (let i = 0; i < rows; i++) {
                const row = document.createElement('div');
                row.className = 'flex-container'; 
                for (let j = 0; j < columns; j++) {
                    // Create a grid item
                    const gridItem = document.createElement('div');
                    gridItem.className = 'grid-item';
                    gridItem.style.width = `${gridItemSize}px`;
                    gridItem.style.height = `${gridItemSize}px`;
                    row.appendChild(gridItem);
                    gridItem.addEventListener("mouseenter", (event) => {
                        gridItem.style.backgroundColor = `${defaultColor}`;
                    })
                }
                gridContainer.appendChild(row);
            }
        }
        
    </script>
    
</body>
</html>